(this.webpackJsonpcyclog=this.webpackJsonpcyclog||[]).push([[0],{203:function(e,t){},210:function(e,t){},258:function(e,t,n){e.exports=n.p+"static/media/directions_bike_24px.64beea8c.svg"},296:function(e,t,n){e.exports=n(705)},301:function(e,t,n){},307:function(e,t,n){},701:function(e,t){},705:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(32),o=n.n(i),c=(n(301),n(115)),l=n(69),s=n(62),u=n(12),p=n(254),d=n(57),m=n(790),f=n(766),g=n(768),b=n(135),O=n(767),h=n(765),j=n(205),y=n.n(j),v=n(256),w=n.n(v),E=n(769),P=n(772),S=n(770),C=n(257),k=n.n(C),D=n(771),N=n(762),x=n(764),I=n(204),R=n.n(I),B=n(185),L="pk.eyJ1IjoibmF0aGFua2lwcCIsImEiOiJjazNid2k3enIwN2QzM2Nucmp5b3NmaXY0In0.cMIErB8-bLVio-MGSeXlfg",z={latitude:39,longitude:-97,zoom:3.25,transitionDuration:"auto",transitionInterpolator:new B.a},M="My New Ride",F={black:[0,0,0],red:[150,50,50],green:[50,150,50],blue:[50,50,150]},T=Object(p.a)((function(e){return{appBar:{backgroundColor:"#323296",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},avatars:{display:"flex",alignItems:"flex-end",position:"absolute",right:e.spacing(2)},avatar:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"}}}));var A=function(e){var t=e.open,n=e.handleDrawerOpen,a=(e.handleDrawerClose,T());return Object(d.a)(),r.a.createElement(N.a,{position:"fixed",className:Object(u.a)(a.appBar,Object(s.a)({},a.appBarShift,t))},r.a.createElement(x.a,null,r.a.createElement(h.a,{color:"inherit","aria-label":"open drawer",onClick:n,edge:"start",className:Object(u.a)(a.menuButton,t&&a.hide)},r.a.createElement(R.a,null)),r.a.createElement(b.a,{variant:"h6",noWrap:!0},"Chroncycle \u2022 A cycling chronical, brah")))};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=Object(p.a)((function(e){return{root:{display:"flex"},appBar:{backgroundColor:"#323296",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},avatars:{display:"flex",alignItems:"flex-end",position:"absolute",right:e.spacing(2)},avatar:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:J({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"space-between"}),loadingRides:{padding:e.spacing(0,2)},content:{position:"relative",flexGrow:1,height:"100vh",padding:e.spacing(0),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},mainContent:{position:"absolute",top:0,right:0,bottom:0,left:0}}}));var H=function(e){var t=e.rides,n=e.selectRide,a=e.children,i=W(),o=Object(d.a)(),c=r.a.useState(!0),p=Object(l.a)(c,2),j=p[0],v=p[1],C=r.a.useState(null),N=Object(l.a)(C,2),x=N[0],I=N[1],R=function(){v(!1)};return r.a.createElement("div",{className:i.root},r.a.createElement(f.a,null),r.a.createElement(A,{open:j,handleDrawerOpen:function(){v(!0)},handleDrawerClose:R}),r.a.createElement(m.a,{className:i.drawer,variant:"persistent",anchor:"left",open:j,classes:{paper:i.drawerPaper}},r.a.createElement("div",{className:i.drawerHeader},r.a.createElement(b.a,{variant:"h6",noWrap:!0},"Rides"),r.a.createElement(h.a,{onClick:R},"ltr"===o.direction?r.a.createElement(y.a,null):r.a.createElement(w.a,null))),r.a.createElement(O.a,null),r.a.createElement(g.a,null,!t.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement(S.a,{primary:"Loading..."})),r.a.createElement("div",{className:i.loadingRides},r.a.createElement(D.a,null))),t.map((function(e){return r.a.createElement(E.a,{button:!0,key:e.name,onClick:function(){return function(e){n(e),I(e.id)}(e)},selected:e.id===x},r.a.createElement(P.a,null,r.a.createElement(k.a,null)),r.a.createElement(S.a,{primary:e.name}))})))),r.a.createElement("main",{className:Object(u.a)(i.content,Object(s.a)({},i.contentShift,j))},r.a.createElement("div",{className:i.drawerHeader}),r.a.createElement("div",{className:i.mainContent},a)))},X=n(786),V=(n(306),n(307),n(151)),_=n.n(V);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}_.a.config.region="us-east-2",_.a.config.credentials=new _.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-2:1056edee-e9e2-4c61-8f7e-45d31a5ab8a4"});var Y=new _.a.DynamoDB.DocumentClient;function q(){return new Promise((function(e,t){Y.scan({TableName:"cyclog"},(function(n,a){n?t("ride list cannot be retrieved"):e(a.Items.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{color:F.black})})))}))}))}var K=n(788),U=n(787),Z=n(258),$=n.n(Z);function ee(e){return new K.a({id:e.name,data:[{coordinates:e.path}],iconAtlas:$.a,iconMapping:{rider:{x:0,y:0,width:24,height:24,mask:!0}},getIcon:function(){return"rider"},getColor:function(){return e.color},getPosition:function(e){return e.coordinates},sizeMinPixels:28})}function te(e){return new U.a({id:e.name,data:[{path:e.path}],getColor:function(){return e.color},rounded:!0,widthMinPixels:2})}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e){if(!e)return[];var t=[];return t.push(ae({},e,{name:"".concat(e.name,"-start"),color:F.green,path:e.path[0]})),e.path.length>1&&t.push(ae({},e,{name:"".concat(e.name,"-end"),color:F.red,path:e.path[e.path.length-1]})),t}var ie=n(263),oe=n.n(ie),ce=n(782),le=n(783),se=n(264),ue=n.n(se),pe=n(265),de=n.n(pe),me=n(266),fe=n.n(me),ge=n(780),be=n(785),Oe=n(775),he=n(779),je=n(777),ye=n(778),ve=n(776),we=n(781),Ee=Object(p.a)((function(e){return{wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));var Pe=function(e){var t=e.open,n=e.handleClose,i=e.handleClickSave,o=Object(a.useState)("test"),c=Object(l.a)(o,2),s=c[0],u=c[1],p=Object(a.useState)(!1),d=Object(l.a)(p,2),m=d[0],f=d[1],g=Ee();return r.a.createElement(Oe.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title"},r.a.createElement(ve.a,{id:"form-dialog-title",style:{minWidth:300}},"Ride Details"),r.a.createElement(je.a,null,r.a.createElement(ye.a,null,"Give your ride a name"),r.a.createElement(be.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,onChange:function(e){var t=e.target.value;return u(t)},value:s})),r.a.createElement(he.a,null,r.a.createElement(ge.a,{variant:"contained",color:"primary",onClick:n,disabled:m},"Cancel"),r.a.createElement("div",{className:g.wrapper},r.a.createElement(ge.a,{variant:"contained",color:"primary",onClick:function(){f(!0),i(s)},disabled:m},"Save"),m&&r.a.createElement(we.a,{className:g.buttonProgress,size:24}))))};function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ce=Object(p.a)((function(e){return{card:{position:"absolute",bottom:e.spacing(3),right:"50%",transform:"translateX(50%)",width:200},cardContent:{display:"flex",justifyContent:"space-around",padding:e.spacing(1),"&:last-child":{paddingBottom:e.spacing(1)}},undo:{color:"#323296"},save:{color:"#329632"},delete:{color:"#963232"}}}));var ke=function(e){var t=e.open,n=e.setOpen,a=(e.viewport,e.path),i=e.setPath,o=e.newRide,c=e.saveRide,l=Ce();return Object(d.a)(),r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{className:l.card},r.a.createElement(le.a,{className:l.cardContent},r.a.createElement(h.a,{"aria-label":"undo",className:l.undo,onClick:function(){return i(a.slice(0,-1))}},r.a.createElement(ue.a,null)),r.a.createElement(h.a,{"aria-label":"save",className:l.save,onClick:function(){n(!0)}},r.a.createElement(de.a,null)),r.a.createElement(h.a,{"aria-label":"trash",className:l.delete,onClick:function(){window.confirm("are you sure?")&&i([])}},r.a.createElement(fe.a,null)))),r.a.createElement(Pe,{open:t,handleClickSave:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,{id:o.id||oe()(),name:e});c(t).then((function(){n(!1)}))},handleClose:function(){n(!1)}}))};function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t){return[{name:M,color:F.blue,path:e,viewport:t}]}var Ie=function(e,t){return e.map((function(e){return Ne({},e,{color:e.id===t.id?F.blue:F.black})}))},Re=function(e){var t=e.longitude,n=e.latitude,a=e.zoom;return Ne({},z,{longitude:t,latitude:n,zoom:a})},Be=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),s=Object(l.a)(o,2),u=s[0],p=s[1],d=Object(a.useState)([]),m=Object(l.a)(d,2),f=m[0],g=m[1],b=Object(a.useState)(!1),O=Object(l.a)(b,2),h=O[0],j=O[1],y=Object(a.useState)(z),v=Object(l.a)(y,2),w=v[0],E=v[1];function P(e){var t=Ie(n,e),a=e.id?re(e):[],r=Re(e.viewport);i(t),p(a),E(r)}Object(a.useEffect)((function(){q().then(i)}),[]),Object(a.useEffect)((function(){if(f.length){var e=xe(f,w),t=f.length-1,n=Ne({},w,{longitude:f[t][0],latitude:f[t][1]});P(e),E(n)}}),[f]);var S=[],C=[];f.length&&(C=re((S=xe(f,w))[0]));var k=[].concat(Object(c.a)(n.map(te)),Object(c.a)(u.map(ee)),Object(c.a)(S.map(te)),Object(c.a)(C.map(ee)));return r.a.createElement(H,{rides:n,selectRide:P},r.a.createElement(B.b,Object.assign({},w,{onClick:function(e){g([].concat(Object(c.a)(f),[e.lngLat])),E(Ne({},w,{longitude:e.lngLat[0],latitude:e.lngLat[1]}))},onViewportChange:E,mapboxApiAccessToken:L,mapStyle:"mapbox://styles/mapbox/outdoors-v11",height:"100%",width:"100%"}),r.a.createElement(X.a,{viewState:w,layers:k})),!!f.length&&r.a.createElement(ke,{open:h,setOpen:j,viewport:w,path:f,setPath:g,newRide:S[0],saveRide:function(e){return function(e){return new Promise((function(t,n){Y.put({Item:e,TableName:"cyclog"},(function(e,a){e?n("ride was not saved"):setTimeout(t,5e3)}))}))}(e).then((function(){var t=[].concat(Object(c.a)(n),[Ne({},e,{color:F.black})]);i(t),g([])}))}}))};o.a.render(r.a.createElement(Be,null),document.getElementById("root"))}},[[296,1,2]]]);
//# sourceMappingURL=main.52000b92.chunk.js.map