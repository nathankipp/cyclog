(this.webpackJsonpcyclog=this.webpackJsonpcyclog||[]).push([[0],{203:function(e,t){},208:function(e,t){},256:function(e,t,n){e.exports=n.p+"static/media/directions_bike_24px.64beea8c.svg"},303:function(e,t,n){e.exports=n(712)},308:function(e,t,n){},312:function(e,t,n){},708:function(e,t){},712:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(32),o=n.n(i),c=(n(308),n(111)),l=n(251),s=n(252),u=n(272),p=n(253),d=n(274),m=n(42),f=n(254),g=n.n(f),b=(n(311),n(312),n(185)),O="pk.eyJ1IjoibmF0aGFua2lwcCIsImEiOiJjazNid2k3enIwN2QzM2Nucmp5b3NmaXY0In0.cMIErB8-bLVio-MGSeXlfg",h={latitude:39,longitude:-97,zoom:3.25,transitionDuration:"auto",transitionInterpolator:new b.a},y={black:[0,0,0],red:[150,50,50],green:[50,150,50],blue:[50,50,150]},v=n(151),w=n.n(v);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}w.a.config.region="us-east-2",w.a.config.credentials=new w.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-2:1056edee-e9e2-4c61-8f7e-45d31a5ab8a4"});var P=new w.a.DynamoDB.DocumentClient;function E(){return new Promise((function(e,t){P.scan({TableName:"cyclog"},(function(n,a){n?t("ride list cannot be retrieved"):e(a.Items.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{color:y.black})})))}))}))}var S=n(794),D=n(793),k=n(256),C=n.n(k);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){return new S.a({id:e.name,data:[{coordinates:e.path}],iconAtlas:C.a,iconMapping:{rider:{x:0,y:0,width:24,height:24,mask:!0}},getIcon:function(){return"rider"},getColor:function(){return e.color},getPosition:function(e){return e.coordinates},sizeMinPixels:28})}function I(e){var t,n=[(t=e,new D.a({id:t.name,data:[{path:t.path}],getColor:function(){return t.color},rounded:!0,widthMinPixels:2}))];if(e.isSelected){var a=R({},e,{name:"".concat(e.name,"-start"),color:y.green,path:e.path[0]});if(n.push(x(a)),e.path.length>1){var r=R({},e,{name:"".concat(e.name,"-end"),color:y.red,path:e.path[e.path.length-1]});n.push(x(r))}}return n}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){if(!e)return[];var t=[];return t.push(M({},e,{name:"".concat(e.name,"-start"),color:y.green,path:e.path[0]})),e.path.length>1&&t.push(M({},e,{name:"".concat(e.name,"-end"),color:y.red,path:e.path[e.path.length-1]})),t}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var L=function(e){var t=e.longitude,n=e.latitude,a=e.zoom;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h,{longitude:t,latitude:n,zoom:a})};function V(e,t){var n=[];return e.length&&(n=[{id:"__new__",name:"\u2022 New ride \u2022",color:y.blue,path:e,viewport:t}]),n}var F=n(148),T=n(12),W=n(261),A=n(58),G=n(796),J=n(774),H=n(776),X=n(135),Q=n(775),Y=n(773),q=n(264),K=n.n(q),U=n(265),Z=n.n(U),$=n(777),ee=n(780),te=n(778),ne=n(266),ae=n.n(ne),re=n(268),ie=n.n(re),oe=n(267),ce=n.n(oe),le=n(779),se=n(770),ue=n(772),pe=n(263),de=n.n(pe),me=Object(W.a)((function(e){return{appBar:{backgroundColor:"#323296",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},avatars:{display:"flex",alignItems:"flex-end",position:"absolute",right:e.spacing(2)},avatar:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"}}}));var fe=function(e){var t=e.open,n=e.handleDrawerOpen,a=(e.handleDrawerClose,me());return r.a.createElement(se.a,{position:"fixed",className:Object(T.a)(a.appBar,Object(m.a)({},a.appBarShift,t))},r.a.createElement(ue.a,null,r.a.createElement(Y.a,{color:"inherit","aria-label":"open drawer",onClick:n,edge:"start",className:Object(T.a)(a.menuButton,t&&a.hide)},r.a.createElement(de.a,null)),r.a.createElement(X.a,{variant:"h6",noWrap:!0},"Sibling Cyclog")))};function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=Object(W.a)((function(e){return{root:{display:"flex"},appBar:{backgroundColor:"#323296",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},avatars:{display:"flex",alignItems:"flex-end",position:"absolute",right:e.spacing(2)},avatar:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:be({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"space-between"}),loadingRides:{padding:e.spacing(0,2)},bikeIcon:{minWidth:40},rideName:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",paddingRight:40},editIcon:{position:"absolute",right:8,padding:8},content:{position:"relative",flexGrow:1,height:"100vh",padding:e.spacing(0),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},mainContent:{position:"absolute",top:0,right:0,bottom:0,left:0}}}));var he=function(e){var t=e.rides,n=e.selectRide,a=e.selectedRideId,i=e.toggleModal,o=e.children,c=Oe(),l=Object(A.a)(),s=r.a.useState(!0),u=Object(F.a)(s,2),p=u[0],d=u[1],f=function(){d(!1)};return r.a.createElement("div",{className:c.root},r.a.createElement(J.a,null),r.a.createElement(fe,{open:p,handleDrawerOpen:function(){d(!0)},handleDrawerClose:f}),r.a.createElement(G.a,{className:c.drawer,variant:"persistent",anchor:"left",open:p,classes:{paper:c.drawerPaper}},r.a.createElement("div",{className:c.drawerHeader},r.a.createElement(X.a,{variant:"h6",noWrap:!0},"Rides"),r.a.createElement(Y.a,{onClick:f},"ltr"===l.direction?r.a.createElement(K.a,null):r.a.createElement(Z.a,null))),r.a.createElement(Q.a,null),r.a.createElement(H.a,null,!t.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,r.a.createElement(te.a,{primary:"Loading..."})),r.a.createElement("div",{className:c.loadingRides},r.a.createElement(le.a,null))),t.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){var t=e.id===a,o=t?"primary":"disabled",l="__new__"===e.id,s=t&&!l;return r.a.createElement($.a,{button:!0,key:e.name.concat(e.id),onClick:function(){return function(e){n(e)}(e)},selected:t,disableTouchRipple:t},r.a.createElement(ee.a,{className:c.bikeIcon},r.a.createElement(ae.a,{color:o})),r.a.createElement(te.a,{className:c.rideName,primary:e.name}),l&&r.a.createElement(Y.a,{size:"small",className:c.editIcon,disabled:!0},r.a.createElement(ce.a,{fontSize:"small"})),s&&r.a.createElement(Y.a,{size:"small",className:c.editIcon,onClick:function(e){e.stopPropagation(),i(!0)}},r.a.createElement(ie.a,{fontSize:"small"})))})))),r.a.createElement("main",{className:Object(T.a)(c.content,Object(m.a)({},c.contentShift,p))},r.a.createElement("div",{className:c.drawerHeader}),r.a.createElement("div",{className:c.mainContent},o)))},ye=n(792);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var we=function(e){var t=e.viewport,n=e.setViewport,a=e.path,i=e.setPath,o=e.layers;return r.a.createElement(b.b,Object.assign({},t,{onClick:function(e){i([].concat(Object(c.a)(a),[e.lngLat])),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{longitude:e.lngLat[0],latitude:e.lngLat[1]}))},onViewportChange:n,mapboxApiAccessToken:O,mapStyle:"mapbox://styles/mapbox/outdoors-v11",height:"100%",width:"100%"}),r.a.createElement(ye.a,{viewState:t,layers:o}))},je=n(782),Pe=n(783),Ee=n(269),Se=n.n(Ee),De=n(270),ke=n.n(De),Ce=n(271),Ne=n.n(Ce),Re=Object(W.a)((function(e){return{card:{position:"absolute",bottom:e.spacing(3),right:"50%",transform:"translateX(50%)",width:200},cardContent:{display:"flex",justifyContent:"space-around",padding:e.spacing(1),"&:last-child":{paddingBottom:e.spacing(1)}},undo:{color:"#323296"},save:{color:"#329632"},delete:{color:"#963232"}}}));var xe=function(e){var t=e.path,n=e.setPath,a=e.toggleModal,i=Re();return r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a,{className:i.card},r.a.createElement(Pe.a,{className:i.cardContent},r.a.createElement(Y.a,{"aria-label":"undo",className:i.undo,onClick:function(){n(t.slice(0,-1))}},r.a.createElement(Se.a,null)),r.a.createElement(Y.a,{"aria-label":"save",className:i.save,onClick:function(){a(!0)}},r.a.createElement(ke.a,null)),r.a.createElement(Y.a,{"aria-label":"trash",className:i.delete,onClick:function(){window.confirm("are you sure?")&&n([])}},r.a.createElement(Ne.a,null)))))},Ie=n(789),_e=n(791),Me=n(784),Be=n(788),ze=n(786),Le=n(787),Ve=n(785),Fe=n(790);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var We=Object(W.a)((function(e){return{wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));var Ae=function(e){var t=e.open,n=e.toggle,i=e.ride,o=e.saveRide,c=Object(a.useState)(i.name||""),l=Object(F.a)(c,2),s=l[0],u=l[1],p=Object(a.useState)(!1),d=Object(F.a)(p,2),f=d[0],g=d[1],b=We();Object(a.useEffect)((function(){u(i.name)}),[i]);var O=function(){n(!1)},h={name:i.id?"Rename your ride":"Give your ride a name"};return r.a.createElement(Me.a,{open:t,onClose:O,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ve.a,{id:"form-dialog-title",style:{minWidth:300}},"Ride Details"),r.a.createElement(ze.a,null,r.a.createElement(Le.a,null,h.name),r.a.createElement(_e.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,onChange:function(e){var t=e.target.value;return u(t)},value:s})),r.a.createElement(Be.a,null,r.a.createElement(Ie.a,{variant:"contained",color:"primary",onClick:O,disabled:f},"Cancel"),r.a.createElement("div",{className:b.wrapper},r.a.createElement(Ie.a,{variant:"contained",color:"primary",onClick:function(){g(!0),o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{name:s})).then((function(){g(!1)}))},disabled:f},"Save"),f&&r.a.createElement(Fe.a,{className:b.buttonProgress,size:24}))))};function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map((function(e){var n=e.id===t.id;return Je({},e,{isSelected:n,icons:n?B(e):[],color:n?y.blue:y.black})}))}var Xe=function(e){return"__new__"!==e.id},Qe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={rides:[],selectedRide:null,path:[],viewport:h,modalOpen:!1},n.componentDidMount=function(){E().then(He).then((function(e){n.setState(Je({},n.state,{rides:e}))}))},n.selectRide=function(e){var t=He(n.state.rides,e),a=L(e.viewport);n.setState(Je({},n.state,{rides:t,selectedRide:e,viewport:a}))},n.setPath=function(e){var t=Je({},n.state,{path:e}),a=n.state,r=a.rides,i=a.viewport;if(e.length){var o=V(e,i),l=[].concat(Object(c.a)(r.filter(Xe)),Object(c.a)(o));t.rides=He(l,o[0]),t.selectedRide=o[0]}else t.rides=r.filter(Xe),t.selectedRide=null;n.setState(t)},n.toggleModal=function(e){return n.setState(Je({},n.state,{modalOpen:e}))},n.saveRide=function(e){var t=n.state,a=t.path,r=t.viewport,i="__new__"===e.id,o=Je({},e,{id:i?g()():e.id,viewport:r});return function(e){return new Promise((function(t,n){P.put({Item:e,TableName:"cyclog"},(function(e,a){e?n("ride was not saved"):t()}))}))}(o).then(E).then((function(e){var t=Object(c.a)(e.filter(Xe));return!i&&a.length&&t.push(V(a,r)[0]),He(t,o)})).then((function(e){n.setState(Je({},n.state,{path:i?[]:a,rides:e,selectedRide:o,modalOpen:!1}))}))},n.setViewport=function(e){return n.setState(Je({},n.state,{viewport:e}))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.rides,n=e.selectedRide,a=e.path,i=e.viewport,o=e.modalOpen,l=Object(c.a)(t.map(I)),s=!!a.length&&n&&"__new__"===n.id;return r.a.createElement(he,{rides:t,selectRide:this.selectRide,selectedRideId:n&&n.id,toggleModal:this.toggleModal},r.a.createElement(we,{viewport:i,setViewport:this.setViewport,path:a,setPath:this.setPath,layers:l}),s&&r.a.createElement(xe,{path:a,setPath:this.setPath,toggleModal:this.toggleModal}),r.a.createElement(Ae,{open:o,toggle:this.toggleModal,ride:n||{},saveRide:this.saveRide}))}}]),t}(r.a.Component);o.a.render(r.a.createElement(Qe,null),document.getElementById("root"))}},[[303,1,2]]]);
//# sourceMappingURL=main.fb557932.chunk.js.map