(this.webpackJsonpcyclog=this.webpackJsonpcyclog||[]).push([[0],{206:function(e,t){},211:function(e,t){},258:function(e,t,n){e.exports=n.p+"static/media/directions_bike_24px.64beea8c.svg"},310:function(e,t,n){e.exports=n(718)},315:function(e,t,n){},714:function(e,t){},718:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(33),o=n.n(i),c=(n(315),n(46)),l=n(112),s=n(253),u=n(254),p=n(274),d=n(255),m=n(275),g=n(256),f=n.n(g),b=(n(318),n(187)),O="pk.eyJ1IjoibmF0aGFua2lwcCIsImEiOiJjazNid2k3enIwN2QzM2Nucmp5b3NmaXY0In0.cMIErB8-bLVio-MGSeXlfg",h="NEW_ID",v={latitude:39,longitude:-97,zoom:3.25,transitionDuration:"auto",transitionInterpolator:new b.a},y={black:[0,0,0],red:[150,50,50],green:[50,150,50],blue:[50,50,150]},w=n(152),j=n.n(w);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}j.a.config.region="us-east-2",j.a.config.credentials=new j.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-2:1056edee-e9e2-4c61-8f7e-45d31a5ab8a4"});var P=new j.a.DynamoDB.DocumentClient,D="cyclog";function S(){return new Promise((function(e,t){P.scan({TableName:D},(function(n,r){n?t("ride list cannot be retrieved"):e(r.Items.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{color:y.black})})))}))}))}var C=n(793),k=n(794),N=n(258),I=n.n(N);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){return new C.a({id:e.name,data:[{coordinates:e.path}],iconAtlas:I.a,iconMapping:{rider:{x:0,y:0,width:24,height:24,mask:!0}},getIcon:function(){return"rider"},getColor:function(){return e.color},getPosition:function(e){return e.coordinates},sizeMinPixels:28})}function z(e){var t,n=[(t=e,new k.a({id:t.id,data:[{path:t.path}],getColor:function(){return t.color},rounded:!0,widthMinPixels:2}))];if(e.isSelected){var r=x({},e,{name:"".concat(e.name,"-start"),color:y.green,path:e.path[0]});if(n.push(F(r)),e.path.length>1){var a=x({},e,{name:"".concat(e.name,"-end"),color:y.red,path:e.path[e.path.length-1]});n.push(F(a))}}return n}var B=n(27),L=n(272);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){return e.id!==h};function V(e){if(!e)return[];var t=[];return t.push(W({},e,{name:"".concat(e.name,"-start"),color:y.green,path:e.path[0]})),e.path.length>1&&t.push(W({},e,{name:"".concat(e.name,"-end"),color:y.red,path:e.path[e.path.length-1]})),t}var A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map((function(e){var n=e.id===t.id;return W({},e,{isSelected:n,icons:n?V(e):[],color:n?y.blue:y.black,milage:e.path.length>1?Object(L.a)(Object(B.e)(e.path),{units:"miles"}):0})}))},H=function(e,t){var n=[];return e.length&&(n=[{id:h,name:"\u2022 New ride \u2022",color:y.blue,path:e,viewport:t}]),n},J=function(e){var t=e.longitude,n=e.latitude,r=e.zoom;return W({},v,{longitude:t,latitude:n,zoom:r})},G=n(790),X=n(12),_=n(263);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=Object(_.a)((function(e){return{drawerHeader:Q({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"space-between"}),content:{position:"relative",flexGrow:1,height:"100vh",padding:e.spacing(0),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-300},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},mainContent:{position:"absolute",top:0,right:0,bottom:0,left:0}}}));var Y=function(e){var t=e.isDrawerOpen,n=e.children,r=U();return a.a.createElement("main",{className:Object(X.a)(r.content,Object(c.a)({},r.contentShift,t))},a.a.createElement("div",{className:r.drawerHeader}),a.a.createElement("div",{className:r.mainContent},n))},q=n(770),Z=n(772),$=n(773),ee=n(136),te=n(265),ne=n.n(te),re=Object(_.a)((function(e){return{appBar:{backgroundColor:"#323296",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(300,"px)"),marginLeft:300,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},hide:{display:"none"},avatars:{display:"flex",alignItems:"flex-end",position:"absolute",right:e.spacing(2)},avatar:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(2)}}}));var ae=a.a.memo((function(e){var t=e.isDrawerOpen,n=e.toggleDrawer,r=re();return a.a.createElement(q.a,{position:"fixed",className:Object(X.a)(r.appBar,Object(c.a)({},r.appBarShift,t))},a.a.createElement(Z.a,null,a.a.createElement($.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return n(!0)},edge:"start",className:Object(X.a)(r.menuButton,t&&r.hide)},a.a.createElement(ne.a,null)),a.a.createElement(ee.a,{variant:"h6",noWrap:!0},"Sibling Cyclog")))})),ie=n(796),oe=n(774),ce=n(266),le=n.n(ce);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=Object(_.a)((function(e){return{drawer:{width:300,flexShrink:0},drawerPaper:{width:300},drawerHeader:ue({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"space-between"})}}));var de=a.a.memo((function(e){var t=e.isDrawerOpen,n=e.toggleDrawer,r=e.children,i=pe();return a.a.createElement(ie.a,{className:i.drawer,variant:"persistent",anchor:"left",open:t,classes:{paper:i.drawerPaper}},a.a.createElement("div",{className:i.drawerHeader},a.a.createElement(ee.a,{variant:"h6",noWrap:!0},"Rides"),a.a.createElement($.a,{onClick:function(){return n(!1)}},a.a.createElement(le.a,null))),a.a.createElement(oe.a,null),r)})),me=n(775),ge=n(776),fe=n(779),be=n(777),Oe=n(267),he=n.n(Oe),ve=n(269),ye=n.n(ve),we=n(184),je=n.n(we),Ee=n(268),Pe=n.n(Ee),De=n(778),Se=Object(_.a)((function(e){return{loadingRides:{padding:e.spacing(0,2)},bikeIcon:{minWidth:40},rideName:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",paddingRight:40},actionIcons:{position:"absolute",right:8},actionIconButton:{marginLeft:8,padding:8}}}));var Ce=a.a.memo((function(e){var t=e.rides,n=e.selectRide,r=e.toggleSaveDialog,i=e.toggleDeleteConfirm,o=(e.children,Se());return a.a.createElement(me.a,null,!t.length&&a.a.createElement(a.a.Fragment,null,a.a.createElement(ge.a,null,a.a.createElement(be.a,{primary:"Loading..."})),a.a.createElement("div",{className:o.loadingRides},a.a.createElement(De.a,null))),t.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){var t=e.id,c=e.name,l=e.isSelected,s=e.milage,u=e.date,p=t===h,d=l&&!p,m=l?"primary":"disabled",g=u?[u]:[];return g.push("".concat(s.toFixed(1),"mi")),g=g.join(" \u2022 "),a.a.createElement(ge.a,{button:!0,key:c.concat(t),onClick:function(){return function(e){return n(e)}(e)},selected:l,disableTouchRipple:l},a.a.createElement(fe.a,{className:o.bikeIcon},a.a.createElement(he.a,{color:m})),a.a.createElement(be.a,{className:o.rideName,primary:c,secondary:g}),p&&a.a.createElement($.a,{size:"small",className:o.actionIcons,disabled:!0},a.a.createElement(Pe.a,{fontSize:"small"})),d&&a.a.createElement("div",{className:o.actionIcons},a.a.createElement($.a,{className:o.actionIconButton,size:"small",onClick:function(e){e.stopPropagation(),r(!0)}},a.a.createElement(ye.a,{fontSize:"small"})),a.a.createElement($.a,{className:o.actionIconButton,size:"small",onClick:function(e){e.stopPropagation(),i(!0)}},a.a.createElement(je.a,{fontSize:"small"}))))})))})),ke=n(792);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ie=function(e){var t=e.viewport,n=e.setViewport,r=e.path,i=e.setPath,o=e.layers;return a.a.createElement(b.b,Object.assign({},t,{onClick:function(e){i([].concat(Object(l.a)(r),[e.lngLat])),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{longitude:e.lngLat[0],latitude:e.lngLat[1]}))},onViewportChange:n,mapboxApiAccessToken:O,mapStyle:"mapbox://styles/mapbox/outdoors-v11",height:"100%",width:"100%"}),a.a.createElement(ke.a,{viewState:t,layers:o}))},Re=n(781),xe=n(782),Fe=n(270),ze=n.n(Fe),Be=n(271),Le=n.n(Be),Me=Object(_.a)((function(e){return{card:{position:"absolute",bottom:e.spacing(3),right:"50%",transform:"translateX(50%)",width:200},cardContent:{display:"flex",justifyContent:"space-around",padding:e.spacing(1),"&:last-child":{paddingBottom:e.spacing(1)}},undo:{color:"#323296"},save:{color:"#329632"},delete:{color:"#963232"}}}));var We=a.a.memo((function(e){var t=e.undoPath,n=e.toggleSaveDialog,r=e.toggleDeleteConfirm,i=Me();return a.a.createElement(a.a.Fragment,null,a.a.createElement(Re.a,{className:i.card},a.a.createElement(xe.a,{className:i.cardContent},a.a.createElement($.a,{"aria-label":"undo",className:i.undo,onClick:function(){return t()}},a.a.createElement(ze.a,null)),a.a.createElement($.a,{"aria-label":"save",className:i.save,onClick:function(){return n(!0)}},a.a.createElement(Le.a,null)),a.a.createElement($.a,{"aria-label":"trash",className:i.delete,onClick:function(){return r(!0)}},a.a.createElement(je.a,null)))))})),Te=n(196),Ve=n(788),Ae=n(791),He=n(783),Je=n(787),Ge=n(785),Xe=n(786),_e=n(784),Ke=n(789);function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ue=Object(_.a)((function(e){return{wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));var Ye=a.a.memo((function(e){var t=e.open,n=e.toggle,i=e.ride,o=e.saveRide,l=Object(r.useState)(i.name||""),s=Object(Te.a)(l,2),u=s[0],p=s[1],d=Object(r.useState)(i.date||""),m=Object(Te.a)(d,2),g=m[0],f=m[1],b=Object(r.useState)(!1),O=Object(Te.a)(b,2),h=O[0],v=O[1],y=Ue();Object(r.useEffect)((function(){p(i.name),f(i.date)}),[i]);var w=function(){return n(!1)},j={name:i.id?"Update your ride":"Save this ride"};return a.a.createElement(He.a,{open:t,onClose:w,"aria-labelledby":"form-dialog-title"},a.a.createElement(_e.a,{id:"form-dialog-title",style:{minWidth:300}},"Ride Details"),a.a.createElement(Ge.a,null,a.a.createElement(Xe.a,null,j.name),a.a.createElement(Ae.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,onChange:function(e){var t=e.target.value;return p(t)},value:u}),a.a.createElement(Ae.a,{margin:"dense",id:"date",label:"Date",type:"text",fullWidth:!0,onChange:function(e){var t=e.target.value;return f(t)},value:g})),a.a.createElement(Je.a,null,a.a.createElement(Ve.a,{variant:"contained",color:"primary",onClick:w,disabled:h},"Cancel"),a.a.createElement("div",{className:y.wrapper},a.a.createElement(Ve.a,{variant:"contained",color:"primary",onClick:function(){v(!0),o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{name:u,date:g})).then((function(){v(!1)}))},disabled:h},"Save"),h&&a.a.createElement(Ke.a,{className:y.buttonProgress,size:24}))))}));var qe=a.a.memo((function(e){var t=e.open,n=e.toggle,r=e.deleteFn,i=function(){n(!1)};return a.a.createElement(He.a,{open:t,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.a.createElement(_e.a,{id:"alert-dialog-title"},"Are you sure?"),a.a.createElement(Ge.a,null,a.a.createElement(Xe.a,{id:"alert-dialog-description"},"Deleting a ride is permanent and irreversible.")),a.a.createElement(Je.a,null,a.a.createElement(Ve.a,{onClick:i,variant:"contained",color:"primary"},"Keep my Ride"),a.a.createElement(Ve.a,{onClick:function(){r().then(i)},variant:"contained",color:"secondary"},"Delete Forever")))}));function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $e=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={rides:[],selectedRide:{},path:[],viewport:v,isDrawerOpen:!0,isSaveDialogOpen:!1,isDeleteConfirmOpen:!1,deleteFn:null},n.componentDidMount=function(){S().then(A).then((function(e){return n.setState({rides:e})}))},n.deleteRideFn=function(e){return function(){var t,r=n.state.rides;return(t=e,new Promise((function(e,n){P.delete({TableName:D,Key:{id:t.id}},(function(t,r){t?n(t):e()}))}))).then((function(){return new Promise((function(t){return n.setState({rides:r.filter((function(t){return t.id!==e.id}))},t)}))}))}},n.selectRide=function(e){var t=n.state.rides,r=A(t,e),a=J(e.viewport),i=n.deleteRideFn(e);n.setState({selectedRide:e,rides:r,deleteFn:i,viewport:a})},n.setPath=function(e){var t={path:e,deleteFn:function(){return n.setPath([])}},r=n.state,a=r.rides,i=r.viewport;if(e.length){var o=H(e,i),c=[].concat(Object(l.a)(a.filter(T)),Object(l.a)(o));t.rides=A(c,o[0]),t.selectedRide=o[0]}else t.rides=a.filter(T),t.selectedRide={};return new Promise((function(e){return n.setState(t,e)}))},n.undoPath=function(){var e=n.state.path;n.setPath(e.slice(0,-1))},n.saveRide=function(e){var t=n.state,r=t.path,a=t.viewport,i=e.id===h,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{id:i?f()():e.id,viewport:a});return function(e){return new Promise((function(t,n){P.put({Item:e,TableName:D},(function(e,r){e?n("ride was not saved"):t()}))}))}(o).then(S).then((function(e){var t=Object(l.a)(e.filter(T));return!i&&r.length&&t.push(H(r,a)[0]),A(t,o)})).then((function(e){n.setState({rides:e,selectedRide:o,deleteFn:n.deleteRideFn(o),path:i?[]:r,isSaveDialogOpen:!1})}))},n.toggleDrawer=function(e){return n.setState({isDrawerOpen:e})},n.toggleSaveDialog=function(e){return n.setState({isSaveDialogOpen:e})},n.toggleDeleteConfirm=function(e){return n.setState({isDeleteConfirmOpen:e})},n.setViewport=function(e){return n.setState({viewport:e})},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.rides,n=e.selectedRide,r=e.path,i=e.viewport,o=e.isDrawerOpen,c=e.isSaveDialogOpen,s=e.isDeleteConfirmOpen,u=e.deleteFn,p=Object(l.a)(t.map(z)),d=!!r.length&&n&&n.id===h;return a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(G.a,null),a.a.createElement(ae,{isDrawerOpen:o,toggleDrawer:this.toggleDrawer}),a.a.createElement(de,{isDrawerOpen:o,toggleDrawer:this.toggleDrawer},a.a.createElement(Ce,{rides:t,selectRide:this.selectRide,toggleSaveDialog:this.toggleSaveDialog,toggleDeleteConfirm:this.toggleDeleteConfirm})),a.a.createElement(Y,{isDrawerOpen:o},a.a.createElement(Ie,{viewport:i,setViewport:this.setViewport,path:r,setPath:this.setPath,layers:p}),d&&a.a.createElement(We,{undoPath:this.undoPath,toggleSaveDialog:this.toggleSaveDialog,toggleDeleteConfirm:this.toggleDeleteConfirm})),a.a.createElement(Ye,{open:c,toggle:this.toggleSaveDialog,ride:n,saveRide:this.saveRide}),a.a.createElement(qe,{open:s,toggle:this.toggleDeleteConfirm,deleteFn:u}))}}]),t}(a.a.Component);o.a.render(a.a.createElement($e,null),document.getElementById("root"))}},[[310,1,2]]]);
//# sourceMappingURL=main.f4d72451.chunk.js.map