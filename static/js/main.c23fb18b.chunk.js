(this.webpackJsonpcyclog=this.webpackJsonpcyclog||[]).push([[0],{204:function(e,t){},209:function(e,t){},257:function(e,t,n){e.exports=n.p+"static/media/directions_bike_24px.64beea8c.svg"},309:function(e,t,n){e.exports=n(718)},314:function(e,t,n){},318:function(e,t,n){},714:function(e,t){},718:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(32),o=n.n(i),c=(n(314),n(111)),l=n(252),s=n(253),u=n(272),p=n(254),d=n(274),g=n(42),m=n(255),f=n.n(m),b=(n(317),n(318),n(186)),O="pk.eyJ1IjoibmF0aGFua2lwcCIsImEiOiJjazNid2k3enIwN2QzM2Nucmp5b3NmaXY0In0.cMIErB8-bLVio-MGSeXlfg",h={latitude:39,longitude:-97,zoom:3.25,transitionDuration:"auto",transitionInterpolator:new b.a},v={black:[0,0,0],red:[150,50,50],green:[50,150,50],blue:[50,50,150]},y=n(151),w=n.n(y);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}w.a.config.region="us-east-2",w.a.config.credentials=new w.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-2:1056edee-e9e2-4c61-8f7e-45d31a5ab8a4"});var E=new w.a.DynamoDB.DocumentClient,P="cyclog";function D(){return new Promise((function(e,t){E.scan({TableName:P},(function(n,a){n?t("ride list cannot be retrieved"):e(a.Items.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{color:v.black})})))}))}))}var S=n(793),C=n(794),k=n(257),N=n.n(k);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){return new S.a({id:e.name,data:[{coordinates:e.path}],iconAtlas:N.a,iconMapping:{rider:{x:0,y:0,width:24,height:24,mask:!0}},getIcon:function(){return"rider"},getColor:function(){return e.color},getPosition:function(e){return e.coordinates},sizeMinPixels:28})}function _(e){var t,n=[(t=e,new C.a({id:t.id,data:[{path:t.path}],getColor:function(){return t.color},rounded:!0,widthMinPixels:2}))];if(e.isSelected){var a=I({},e,{name:"".concat(e.name,"-start"),color:v.green,path:e.path[0]});if(n.push(x(a)),e.path.length>1){var r=I({},e,{name:"".concat(e.name,"-end"),color:v.red,path:e.path[e.path.length-1]});n.push(x(r))}}return n}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e){if(!e)return[];var t=[];return t.push(B({},e,{name:"".concat(e.name,"-start"),color:v.green,path:e.path[0]})),e.path.length>1&&t.push(B({},e,{name:"".concat(e.name,"-end"),color:v.red,path:e.path[e.path.length-1]})),t}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var M=function(e){var t=e.longitude,n=e.latitude,a=e.zoom;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h,{longitude:t,latitude:n,zoom:a})};function T(e,t){var n=[];return e.length&&(n=[{id:"__new__",name:"\u2022 New ride \u2022",color:v.blue,path:e,viewport:t}]),n}var V=n(148),A=n(12),W=n(262),G=n(58),J=n(796),H=n(774),X=n(776),K=n(135),Q=n(775),Y=n(773),q=n(265),U=n.n(q),Z=n(266),$=n.n(Z),ee=n(777),te=n(780),ne=n(778),ae=n(267),re=n.n(ae),ie=n(269),oe=n.n(ie),ce=n(183),le=n.n(ce),se=n(268),ue=n.n(se),pe=n(779),de=n(770),ge=n(772),me=n(264),fe=n.n(me),be=Object(W.a)((function(e){return{appBar:{backgroundColor:"#323296",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(300,"px)"),marginLeft:300,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},avatars:{display:"flex",alignItems:"flex-end",position:"absolute",right:e.spacing(2)},avatar:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"}}}));var Oe=function(e){var t=e.open,n=e.handleDrawerOpen,a=(e.handleDrawerClose,be());return r.a.createElement(de.a,{position:"fixed",className:Object(A.a)(a.appBar,Object(g.a)({},a.appBarShift,t))},r.a.createElement(ge.a,null,r.a.createElement(Y.a,{color:"inherit","aria-label":"open drawer",onClick:n,edge:"start",className:Object(A.a)(a.menuButton,t&&a.hide)},r.a.createElement(fe.a,null)),r.a.createElement(K.a,{variant:"h6",noWrap:!0},"Sibling Cyclog")))};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=Object(W.a)((function(e){return{root:{display:"flex"},appBar:{backgroundColor:"#323296",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(300,"px)"),marginLeft:300,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},avatars:{display:"flex",alignItems:"flex-end",position:"absolute",right:e.spacing(2)},avatar:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:300,flexShrink:0},drawerPaper:{width:300},drawerHeader:ve({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"space-between"}),loadingRides:{padding:e.spacing(0,2)},bikeIcon:{minWidth:40},rideName:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",paddingRight:40},actionIcons:{position:"absolute",right:8},actionIconButton:{marginLeft:8,padding:8},content:{position:"relative",flexGrow:1,height:"100vh",padding:e.spacing(0),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-300},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},mainContent:{position:"absolute",top:0,right:0,bottom:0,left:0}}}));var we=function(e){var t=e.rides,n=e.selectRide,a=e.selectedRideId,i=e.toggleSaveDialog,o=e.toggleDeleteConfirm,c=e.children,l=ye(),s=Object(G.a)(),u=r.a.useState(!0),p=Object(V.a)(u,2),d=p[0],m=p[1],f=function(){return m(!1)};return r.a.createElement("div",{className:l.root},r.a.createElement(H.a,null),r.a.createElement(Oe,{open:d,handleDrawerOpen:function(){return m(!0)},handleDrawerClose:f}),r.a.createElement(J.a,{className:l.drawer,variant:"persistent",anchor:"left",open:d,classes:{paper:l.drawerPaper}},r.a.createElement("div",{className:l.drawerHeader},r.a.createElement(K.a,{variant:"h6",noWrap:!0},"Rides"),r.a.createElement(Y.a,{onClick:f},"ltr"===s.direction?r.a.createElement(U.a,null):r.a.createElement($.a,null))),r.a.createElement(Q.a,null),r.a.createElement(X.a,null,!t.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,null,r.a.createElement(ne.a,{primary:"Loading..."})),r.a.createElement("div",{className:l.loadingRides},r.a.createElement(pe.a,null))),t.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){var t=e.id===a,c=t?"primary":"disabled",s="__new__"===e.id,u=t&&!s;return r.a.createElement(ee.a,{button:!0,key:e.name.concat(e.id),onClick:function(){return function(e){return n(e)}(e)},selected:t,disableTouchRipple:t},r.a.createElement(te.a,{className:l.bikeIcon},r.a.createElement(re.a,{color:c})),r.a.createElement(ne.a,{className:l.rideName,primary:e.name}),s&&r.a.createElement(Y.a,{size:"small",className:l.actionIcons,disabled:!0},r.a.createElement(ue.a,{fontSize:"small"})),u&&r.a.createElement("div",{className:l.actionIcons},r.a.createElement(Y.a,{className:l.actionIconButton,size:"small",onClick:function(e){e.stopPropagation(),i(!0)}},r.a.createElement(oe.a,{fontSize:"small"})),r.a.createElement(Y.a,{className:l.actionIconButton,size:"small",onClick:function(e){e.stopPropagation(),o(!0)}},r.a.createElement(le.a,{fontSize:"small"}))))})))),r.a.createElement("main",{className:Object(A.a)(l.content,Object(g.a)({},l.contentShift,d))},r.a.createElement("div",{className:l.drawerHeader}),r.a.createElement("div",{className:l.mainContent},c)))},je=n(792);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Pe=function(e){var t=e.viewport,n=e.setViewport,a=e.path,i=e.setPath,o=e.layers;return r.a.createElement(b.b,Object.assign({},t,{onClick:function(e){i([].concat(Object(c.a)(a),[e.lngLat])),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{longitude:e.lngLat[0],latitude:e.lngLat[1]}))},onViewportChange:n,mapboxApiAccessToken:O,mapStyle:"mapbox://styles/mapbox/outdoors-v11",height:"100%",width:"100%"}),r.a.createElement(je.a,{viewState:t,layers:o}))},De=n(782),Se=n(783),Ce=n(270),ke=n.n(Ce),Ne=n(271),Re=n.n(Ne),Ie=Object(W.a)((function(e){return{card:{position:"absolute",bottom:e.spacing(3),right:"50%",transform:"translateX(50%)",width:200},cardContent:{display:"flex",justifyContent:"space-around",padding:e.spacing(1),"&:last-child":{paddingBottom:e.spacing(1)}},undo:{color:"#323296"},save:{color:"#329632"},delete:{color:"#963232"}}}));var xe=function(e){var t=e.undoPath,n=e.toggleSaveDialog,a=e.toggleDeleteConfirm,i=Ie();return r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{className:i.card},r.a.createElement(Se.a,{className:i.cardContent},r.a.createElement(Y.a,{"aria-label":"undo",className:i.undo,onClick:function(){return t()}},r.a.createElement(ke.a,null)),r.a.createElement(Y.a,{"aria-label":"save",className:i.save,onClick:function(){return n(!0)}},r.a.createElement(Re.a,null)),r.a.createElement(Y.a,{"aria-label":"trash",className:i.delete,onClick:function(){return a(!0)}},r.a.createElement(le.a,null)))))},_e=n(789),Fe=n(791),Be=n(784),ze=n(788),Le=n(786),Me=n(787),Te=n(785),Ve=n(790);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var We=Object(W.a)((function(e){return{wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));var Ge=function(e){var t=e.open,n=e.toggle,i=e.ride,o=e.saveRide,c=Object(a.useState)(i.name||""),l=Object(V.a)(c,2),s=l[0],u=l[1],p=Object(a.useState)(!1),d=Object(V.a)(p,2),m=d[0],f=d[1],b=We();Object(a.useEffect)((function(){u(i.name)}),[i]);var O=function(){n(!1)},h={name:i.id?"Rename your ride":"Give your ride a name"};return r.a.createElement(Be.a,{open:t,onClose:O,"aria-labelledby":"form-dialog-title"},r.a.createElement(Te.a,{id:"form-dialog-title",style:{minWidth:300}},"Ride Details"),r.a.createElement(Le.a,null,r.a.createElement(Me.a,null,h.name),r.a.createElement(Fe.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,onChange:function(e){var t=e.target.value;return u(t)},value:s})),r.a.createElement(ze.a,null,r.a.createElement(_e.a,{variant:"contained",color:"primary",onClick:O,disabled:m},"Cancel"),r.a.createElement("div",{className:b.wrapper},r.a.createElement(_e.a,{variant:"contained",color:"primary",onClick:function(){f(!0),o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{name:s})).then((function(){f(!1)}))},disabled:m},"Save"),m&&r.a.createElement(Ve.a,{className:b.buttonProgress,size:24}))))};var Je=function(e){var t=e.open,n=e.deleteFn,a=e.toggleDeleteConfirm,i=function(){a(!1)};return r.a.createElement(Be.a,{open:t,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Te.a,{id:"alert-dialog-title"},"Are you sure?"),r.a.createElement(Le.a,null,r.a.createElement(Me.a,{id:"alert-dialog-description"},"Deleting a ride is permanent and irreversible.")),r.a.createElement(ze.a,null,r.a.createElement(_e.a,{onClick:i,variant:"contained",color:"primary"},"Keep my Ride"),r.a.createElement(_e.a,{onClick:function(){n().then(i)},variant:"contained",color:"secondary"},"Delete Forever")))};function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map((function(e){var n=e.id===t.id;return Xe({},e,{isSelected:n,icons:n?z(e):[],color:n?v.blue:v.black})}))}var Qe=function(e){return"__new__"!==e.id},Ye=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={rides:[],selectedRide:null,path:[],viewport:h,isSaveDialogOpen:!1,isDeleteConfirmOpen:!1,deleteFn:null},n.componentDidMount=function(){D().then(Ke).then((function(e){return n.setState({rides:e})}))},n.deleteRideFn=function(e){return function(){var t,a=n.state.rides;return(t=e,new Promise((function(e,n){E.delete({TableName:P,Key:{id:t.id}},(function(t,a){t?n(t):e()}))}))).then((function(){return new Promise((function(t){return n.setState({rides:a.filter((function(t){return t.id!==e.id}))},t)}))}))}},n.selectRide=function(e){var t=Ke(n.state.rides,e),a=M(e.viewport),r=n.deleteRideFn(e);n.setState({selectedRide:e,rides:t,deleteFn:r,viewport:a})},n.setPath=function(e){var t={path:e,deleteFn:function(){return n.setPath([])}},a=n.state,r=a.rides,i=a.viewport;if(e.length){var o=T(e,i),l=[].concat(Object(c.a)(r.filter(Qe)),Object(c.a)(o));t.rides=Ke(l,o[0]),t.selectedRide=o[0]}else t.rides=r.filter(Qe),t.selectedRide=null;return new Promise((function(e){return n.setState(t,e)}))},n.undoPath=function(){var e=n.state.path;n.setPath(e.slice(0,-1))},n.saveRide=function(e){var t=n.state,a=t.path,r=t.viewport,i="__new__"===e.id,o=Xe({},e,{id:i?f()():e.id,viewport:r});return function(e){return new Promise((function(t,n){E.put({Item:e,TableName:P},(function(e,a){e?n("ride was not saved"):t()}))}))}(o).then(D).then((function(e){var t=Object(c.a)(e.filter(Qe));return!i&&a.length&&t.push(T(a,r)[0]),Ke(t,o)})).then((function(e){n.setState({rides:e,selectedRide:o,deleteFn:n.deleteRideFn(o),path:i?[]:a,isSaveDialogOpen:!1})}))},n.toggleSaveDialog=function(e){return n.setState({isSaveDialogOpen:e})},n.toggleDeleteConfirm=function(e){return n.setState({isDeleteConfirmOpen:e})},n.setViewport=function(e){return n.setState({viewport:e})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.rides,n=e.selectedRide,a=e.path,i=e.viewport,o=e.isSaveDialogOpen,l=e.isDeleteConfirmOpen,s=e.deleteFn,u=Object(c.a)(t.map(_)),p=!!a.length&&n&&"__new__"===n.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{rides:t,selectRide:this.selectRide,selectedRideId:n&&n.id,toggleSaveDialog:this.toggleSaveDialog,toggleDeleteConfirm:this.toggleDeleteConfirm},r.a.createElement(Pe,{viewport:i,setViewport:this.setViewport,path:a,setPath:this.setPath,layers:u}),p&&r.a.createElement(xe,{undoPath:this.undoPath,toggleSaveDialog:this.toggleSaveDialog,toggleDeleteConfirm:this.toggleDeleteConfirm})),r.a.createElement(Ge,{open:o,toggle:this.toggleSaveDialog,ride:n||{},saveRide:this.saveRide}),r.a.createElement(Je,{open:l,toggleDeleteConfirm:this.toggleDeleteConfirm,deleteFn:s}))}}]),t}(r.a.Component);o.a.render(r.a.createElement(Ye,null),document.getElementById("root"))}},[[309,1,2]]]);
//# sourceMappingURL=main.c23fb18b.chunk.js.map