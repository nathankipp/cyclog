(this.webpackJsonpcyclog=this.webpackJsonpcyclog||[]).push([[0],{204:function(e,t){},208:function(e,t){},258:function(e,t,a){e.exports=a.p+"static/media/directions_bike_24px.64beea8c.svg"},319:function(e,t,a){e.exports=a(727)},324:function(e,t,a){},722:function(e,t){},727:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(36),o=a.n(i),c=(a(324),a(46)),l=a(75),s=a(253),d=a(254),u=a(272),m=a(255),p=a(273),g=a(256),f=a.n(g),h=(a(327),a(186)),v=[],b="pk.eyJ1IjoibmF0aGFua2lwcCIsImEiOiJjazNid2k3enIwN2QzM2Nucmp5b3NmaXY0In0.cMIErB8-bLVio-MGSeXlfg",w={latitude:39,longitude:-97,zoom:3.25,transitionDuration:"auto",transitionInterpolator:new h.a},E={black:[0,0,0],red:[150,50,50],green:[50,150,50],blue:[50,50,150]},O=a(152),j=a.n(O);j.a.config.region="us-east-2",j.a.config.credentials=new j.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-2:1056edee-e9e2-4c61-8f7e-45d31a5ab8a4"});var y=new j.a.DynamoDB.DocumentClient;function D(){return new Promise((function(e,t){y.scan({TableName:"cyclog"},(function(a,n){a?t("ride list cannot be retrieved"):e(n.Items.map((function(e){return Object(c.a)({},e,{color:E.black})})))}))}))}function C(e){return new Promise((function(t,a){y.put({Item:e,TableName:"cyclog"},(function(e,n){e?a("ride was not saved"):t()}))}))}function S(e){return new Promise((function(t,a){y.delete({TableName:"cyclog",Key:{id:e.id}},(function(e,n){e?a(e):t()}))}))}var N=a(803),x=a(804),R=a(258),k=a.n(R);function I(e){return new N.a({id:e.name,data:[{coordinates:e.path}],iconAtlas:k.a,iconMapping:{rider:{x:0,y:0,width:24,height:24,mask:!0}},getIcon:function(){return"rider"},getColor:function(){return e.color},getPosition:function(e){return e.coordinates},sizeMinPixels:28})}function P(e){var t,a=[(t=e,new x.a({id:t.id,data:[{path:t.path}],getColor:function(){return t.color},rounded:!0,widthMinPixels:2}))];if(e.isSelected){var n=Object(c.a)({},e,{name:"".concat(e.name,"-start"),color:E.green,path:e.path[0]});if(a.push(I(n)),e.path.length>1){var r=Object(c.a)({},e,{name:"".concat(e.name,"-end"),color:E.red,path:e.path[e.path.length-1]});a.push(I(r))}}return a}var F=a(29),z=a(270),B=function(e){return"NEW_ID"!==e.id};function W(e){if(!e)return[];var t=[];return t.push(Object(c.a)({},e,{name:"".concat(e.name,"-start"),color:E.green,path:e.path[0]})),e.path.length>1&&t.push(Object(c.a)({},e,{name:"".concat(e.name,"-end"),color:E.red,path:e.path[e.path.length-1]})),t}var L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map((function(e){var a=e.id===t.id;return Object(c.a)({},e,{isSelected:a,riders:e.riders||"",icons:a?W(e):[],color:a?E.blue:E.black,milage:e.path.length>1?Object(z.a)(Object(F.e)(e.path),{units:"miles"}):0})}))},T=function(e,t){var a=[];return e.length&&(a=[{id:"NEW_ID",name:"\u2022 New ride \u2022",color:E.blue,path:e,viewport:t}]),a},G=function(e){var t=e.longitude,a=e.latitude,n=e.zoom;return Object(c.a)({},w,{longitude:t,latitude:a,zoom:n})},M=function(){return window.location.hash},_=function(){var e=M().match(/#\/([\w,]*)\//);return e&&e[1]&&e[1].split(",")},V=function(e){return e.find((function(e){return M().match(new RegExp("/".concat(e.id,"$")))}))},$=function(e){var t,a=e.join(",");t=M()?M().replace(/#\/[\w,]*\//,"/".concat(a,"/")):"/".concat(a,"/"),window.location.hash=t},A=function(e){return window.location.hash=M().replace(/\/[\w\d-]*$/,"/".concat(e.id))},H=a(800),J=a(119),X=a(12),K=a(777),Y=Object(K.a)((function(e){return{drawerHeader:Object(c.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"space-between"}),content:{position:"relative",flexGrow:1,height:"100vh",padding:e.spacing(0),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-300},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},mainContent:{position:"absolute",top:0,right:0,bottom:0,left:0}}}));var Q=function(e){var t=e.isDrawerOpen,a=e.children,n=Y();return r.a.createElement("main",{className:Object(X.a)(n.content,Object(J.a)({},n.contentShift,t))},r.a.createElement("div",{className:n.drawerHeader}),r.a.createElement("div",{className:n.mainContent},a))},U=a(780),q=a(782),Z=a(783),ee=a(737),te=a(134),ae=a(264),ne=a.n(ae),re=a(95),ie=a.n(re),oe=a(96),ce=a.n(oe),le=a(97),se=a.n(le),de=Object(K.a)((function(e){return{appBar:{backgroundColor:"#323296",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(300,"px)"),marginLeft:300,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},hide:{display:"none"},hideForSmall:{"@media only screen and (max-width: 620px)":{display:"none"}},avatars:{display:"flex",alignItems:"flex-end",position:"absolute",right:e.spacing(2),"@media only screen and (max-width: 420px)":{right:e.spacing(1)}},avatar:{cursor:"pointer",marginRight:e.spacing(2),"@media only screen and (max-width: 420px)":{height:e.spacing(4),width:e.spacing(4),marginRight:e.spacing(1)}},inactive:{opacity:.25},menuButton:{marginRight:e.spacing(2)}}}));var ue=r.a.memo((function(e){var t=e.isDrawerOpen,a=e.toggleDrawer,n=e.riders,i=e.addRider,o=e.removeRider,c=de();return r.a.createElement(U.a,{position:"fixed",className:Object(X.a)(c.appBar,Object(J.a)({},c.appBarShift,t))},r.a.createElement(q.a,null,r.a.createElement(Z.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return a(!0)},edge:"start",className:Object(X.a)(c.menuButton,t&&c.hide)},r.a.createElement(ne.a,null)),r.a.createElement(te.a,{variant:"h6",noWrap:!0},"Sibling Cyclog"),r.a.createElement("div",{className:Object(X.a)(c.avatars,t&&c.hide)},[ie.a,ce.a,se.a].map((function(e){var a=e.replace(/^.*\/(\w+)..*$/,"$1"),l=!n.includes(a);return r.a.createElement(ee.a,{key:a,className:Object(X.a)(c.avatar,l&&c.inactive,t&&c.hideForSmall),src:e,onClick:function(){l?i(a):o(a)}})})))))})),me=a(805),pe=a(784),ge=a(265),fe=a.n(ge),he=Object(K.a)((function(e){return{drawer:{width:300,flexShrink:0},drawerPaper:{width:300},drawerHeader:Object(c.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"space-between"})}}));var ve=r.a.memo((function(e){var t=e.isDrawerOpen,a=e.toggleDrawer,n=e.children,i=he();return r.a.createElement(me.a,{className:i.drawer,variant:"persistent",anchor:"left",open:t,classes:{paper:i.drawerPaper}},r.a.createElement("div",{className:i.drawerHeader},r.a.createElement(te.a,{variant:"h6",noWrap:!0},"Rides"),r.a.createElement(Z.a,{onClick:function(){return a(!1)}},r.a.createElement(fe.a,null))),r.a.createElement(pe.a,null),n)})),be=a(785),we=a(786),Ee=a(787),Oe=Object(K.a)((function(e){return{card:{paddingLeft:e.spacing(5),position:"absolute",top:e.spacing(10),right:"50%",transform:"translateX(50%)"},cardContent:{"&:last-child":{paddingBottom:e.spacing(1)},display:"flex",justifyContent:"space-around"},avatarGroup:{position:"absolute",left:e.spacing(1),top:"50%",transform:"translateY(-50%)",flexDirection:"column",marginTop:4,marginLeft:8},avatar:{borderWidth:1,margin:"-6px 0 0 0",height:e.spacing(3),width:e.spacing(3)}}})),je=function(e){switch(e){case"sarah":return ce.a;case"jesse":return se.a;case"nathan":return ie.a;default:return}};var ye=function(e){var t=e.ride,a=Oe(),n=t.date,i=t.milage,o=void 0===i?0:i,c=t.name,l=t.riders,s=void 0===l?"":l,d=n?[n]:[];return void 0!==o&&d.push("".concat(o.toFixed(1),"mi")),d=d.join(" \u2022 "),r.a.createElement(be.a,{className:a.card},r.a.createElement(we.a,{className:a.cardContent},r.a.createElement(Ee.a,{className:a.avatarGroup},s.split(",").map((function(e){return r.a.createElement(ee.a,{key:e,className:a.avatar,src:je(e)})}))),r.a.createElement("div",null,r.a.createElement(te.a,{variant:"h6"},c),r.a.createElement(te.a,{variant:"subtitle1"},d))))},De=a(788),Ce=a(789),Se=a(790),Ne=a(267),xe=a.n(Ne),Re=a(183),ke=a.n(Re),Ie=a(266),Pe=a.n(Ie),Fe=a(791),ze=Object(K.a)((function(e){return{loadingRides:{padding:e.spacing(0,2)},bikeIcon:{minWidth:40},avatarGroup:{flexDirection:"column",marginTop:8,marginRight:8},avatar:{borderWidth:1,margin:"-6px 0 0 0",height:e.spacing(3),width:e.spacing(3)},rideName:{"& span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},paddingRight:"0 10px 0 0"},selected:{paddingRight:75},actionIcons:{position:"absolute",right:8,zIndex:10},actionIconButton:{marginLeft:8,padding:8}}})),Be=function(e){switch(e){case"sarah":return ce.a;case"jesse":return se.a;case"nathan":return ie.a;default:return}};var We=r.a.memo((function(e){var t=e.rides,a=(e.riders,e.selectRide),n=e.toggleSaveDialog,i=e.toggleDeleteConfirm,o=(e.children,ze());return r.a.createElement(De.a,null,!t.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,null,r.a.createElement(Se.a,{primary:"Loading..."})),r.a.createElement("div",{className:o.loadingRides},r.a.createElement(Fe.a,null))),t.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){var t=e.id,c=e.name,l=e.isSelected,s=e.milage,d=e.date,u="NEW_ID"===t,m=l&&!u,p=d?[d]:[];return p.push("".concat(s.toFixed(1),"mi")),p=p.join(" \u2022 "),r.a.createElement(Ce.a,{button:!0,key:c.concat(t),onClick:function(){return function(e){return a(e)}(e)},selected:l,disableTouchRipple:l},r.a.createElement(Ee.a,{className:o.avatarGroup},e.riders.split(",").map((function(e){return r.a.createElement(ee.a,{key:e,className:o.avatar,src:Be(e)})}))),r.a.createElement(Se.a,{className:Object(X.a)(o.rideName,m&&o.selected),primary:e.name,secondary:p}),u&&r.a.createElement(Z.a,{size:"small",className:o.actionIcons,disabled:!0},r.a.createElement(Pe.a,{fontSize:"small"})),m&&r.a.createElement("div",{className:o.actionIcons},r.a.createElement(Z.a,{className:o.actionIconButton,size:"small",onClick:function(e){e.stopPropagation(),n(!0)}},r.a.createElement(xe.a,{fontSize:"small"})),r.a.createElement(Z.a,{className:o.actionIconButton,size:"small",onClick:function(e){e.stopPropagation(),i(!0)}},r.a.createElement(ke.a,{fontSize:"small"}))))})))})),Le=a(802),Te=function(e){var t=e.viewport,a=e.setViewport,n=e.path,i=e.setPath,o=e.layers;return r.a.createElement(h.b,Object.assign({},t,{onClick:function(e){i([].concat(Object(l.a)(n),[e.lngLat])),a(Object(c.a)({},t,{longitude:e.lngLat[0],latitude:e.lngLat[1]}))},onViewportChange:a,mapboxApiAccessToken:b,mapStyle:"mapbox://styles/mapbox/outdoors-v11",height:"100%",width:"100%"}),r.a.createElement(Le.a,{viewState:t,layers:o}))},Ge=a(268),Me=a.n(Ge),_e=a(269),Ve=a.n(_e),$e=Object(K.a)((function(e){return{card:{position:"absolute",bottom:e.spacing(3),right:"50%",transform:"translateX(50%)",width:200},cardContent:{display:"flex",justifyContent:"space-around",padding:e.spacing(1),"&:last-child":{paddingBottom:e.spacing(1)}},undo:{color:"#323296"},save:{color:"#329632"},delete:{color:"#963232"}}}));var Ae=r.a.memo((function(e){var t=e.undoPath,a=e.toggleSaveDialog,n=e.toggleDeleteConfirm,i=$e();return r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{className:i.card},r.a.createElement(we.a,{className:i.cardContent},r.a.createElement(Z.a,{"aria-label":"undo",className:i.undo,onClick:function(){return t()}},r.a.createElement(Me.a,null)),r.a.createElement(Z.a,{"aria-label":"save",className:i.save,onClick:function(){return a(!0)}},r.a.createElement(Ve.a,null)),r.a.createElement(Z.a,{"aria-label":"trash",className:i.delete,onClick:function(){return n(!0)}},r.a.createElement(ke.a,null)))))})),He=a(155),Je=a(798),Xe=a(801),Ke=a(793),Ye=a(797),Qe=a(795),Ue=a(796),qe=a(794),Ze=a(799),et=Object(K.a)((function(e){return{wrapper:{margin:e.spacing(1),position:"relative"},avatars:{display:"flex",justifyContent:"space-evenly"},avatar:{cursor:"pointer",margin:e.spacing(2)},inactive:{opacity:.25},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),tt=function(e){return e&&e.split(",")||[]};var at=r.a.memo((function(e){var t=e.open,a=e.toggle,i=e.ride,o=e.saveRide,s=Object(n.useState)(i.name||""),d=Object(He.a)(s,2),u=d[0],m=d[1],p=Object(n.useState)(tt(i.riders)),g=Object(He.a)(p,2),f=g[0],h=g[1],v=Object(n.useState)(i.date||""),b=Object(He.a)(v,2),w=b[0],E=b[1],O=Object(n.useState)(!1),j=Object(He.a)(O,2),y=j[0],D=j[1],C=et();Object(n.useEffect)((function(){h(tt(i.riders)),m(i.name),E(i.date)}),[i]);var S=function(){return a(!1)},N={name:i.id?"Update this ride":"Save your ride"};return r.a.createElement(Ke.a,{open:t,onClose:S,"aria-labelledby":"form-dialog-title"},r.a.createElement(qe.a,{id:"form-dialog-title",style:{minWidth:300}},"Ride Details"),r.a.createElement(Qe.a,null,r.a.createElement(Ue.a,null,N.name),r.a.createElement("div",{className:C.avatars},[ie.a,ce.a,se.a].map((function(e){var t=e.replace(/^.*\/(\w+)..*$/,"$1"),a=!f.includes(t);return r.a.createElement(ee.a,{key:t,className:Object(X.a)(C.avatar,a&&C.inactive),src:e,onClick:function(){a?function(e){h([].concat(Object(l.a)(f),[e]))}(t):function(e){h(f.filter((function(t){return t!==e})))}(t)}})}))),r.a.createElement(Xe.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,onChange:function(e){var t=e.target.value;return m(t)},value:u}),r.a.createElement(Xe.a,{margin:"dense",id:"date",label:"Date",type:"text",fullWidth:!0,onChange:function(e){var t=e.target.value;return E(t)},value:w})),r.a.createElement(Ye.a,null,r.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:S,disabled:y},"Cancel"),r.a.createElement("div",{className:C.wrapper},r.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:function(){D(!0);var e=f.sort((function(e,t){return e[1].localeCompare(t[1])})).join(",")||void 0;o(Object(c.a)({},i,{riders:e,name:u,date:w})).finally((function(){D(!1)}))},disabled:y},"Save"),y&&r.a.createElement(Ze.a,{className:C.buttonProgress,size:24}))))}));var nt=r.a.memo((function(e){var t=e.open,a=e.toggle,n=e.deleteFn,i=function(){a(!1)};return r.a.createElement(Ke.a,{open:t,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(qe.a,{id:"alert-dialog-title"},"Are you sure?"),r.a.createElement(Qe.a,null,r.a.createElement(Ue.a,{id:"alert-dialog-description"},"Deleting a ride is permanent and irreversible.")),r.a.createElement(Ye.a,null,r.a.createElement(Je.a,{onClick:i,variant:"contained",color:"primary"},"Keep my Ride"),r.a.createElement(Je.a,{onClick:function(){n().then(i)},variant:"contained",color:"secondary"},"Delete Forever")))})),rt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={rides:[],riders:_()||v,selectedRide:{},path:[],viewport:w,isDrawerOpen:!0,isSaveDialogOpen:!1,isDeleteConfirmOpen:!1,deleteFn:null},a.componentDidMount=function(){window.location.hash||(window.location.hash="//"),D().then(L).then((function(e){return a.setState({rides:e},(function(){var t=V(e);t&&a.selectRide(t)}))}))},a.deleteRideFn=function(e){return function(){var t=a.state.rides;return S(e).then((function(){return new Promise((function(n){return a.setState({rides:t.filter((function(t){return t.id!==e.id})),selectedRide:{}},n)}))}))}},a.selectRide=function(e){A(e);var t=a.state.rides,n=L(t,e),r=G(e.viewport),i=a.deleteRideFn(e);a.setState({selectedRide:e,rides:n,deleteFn:i,viewport:r})},a.setPath=function(e){var t={path:e,deleteFn:function(){return a.setPath([])}},n=a.state,r=n.rides,i=n.viewport;if(e.length){var o=T(e,i),c=[].concat(Object(l.a)(r.filter(B)),Object(l.a)(o));t.rides=L(c,o[0]),t.selectedRide=t.rides.find((function(e){return e.isSelected}))}else t.rides=r.filter(B),t.selectedRide={};return new Promise((function(e){return a.setState(t,e)}))},a.undoPath=function(){var e=a.state.path;a.setPath(e.slice(0,-1))},a.saveRide=function(e){var t=a.state,n=t.path,r=t.viewport,i="NEW_ID"===e.id,o=i?f()():e.id,s=Object(c.a)({},e,{id:o,viewport:r});return C(s).then(D).then((function(e){var t=Object(l.a)(e.filter(B));return!i&&n.length&&t.push(T(n,r)[0]),L(t,s)})).then((function(e){a.setState({rides:e,selectedRide:s,deleteFn:a.deleteRideFn(s),path:i?[]:n,isSaveDialogOpen:!1})}))},a.addRider=function(e){var t=[].concat(Object(l.a)(a.state.riders),[e]);$(t),a.setState({riders:t})},a.removeRider=function(e){var t=a.state.riders.filter((function(t){return t!==e}));$(t),a.setState({riders:t})},a.toggleDrawer=function(e){return a.setState({isDrawerOpen:e})},a.toggleSaveDialog=function(e){return a.setState({isSaveDialogOpen:e})},a.toggleDeleteConfirm=function(e){return a.setState({isDeleteConfirmOpen:e})},a.setViewport=function(e){return a.setState({viewport:e})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.rides,a=e.riders,n=e.selectedRide,i=e.path,o=e.viewport,c=e.isDrawerOpen,s=e.isSaveDialogOpen,d=e.isDeleteConfirmOpen,u=e.deleteFn,m=t.filter((function(e){return a.map((function(t){return e.riders.includes(t)||!e.riders})).every((function(e){return e}))})),p=Object(l.a)(m.map(P)),g=!!i.length&&n&&"NEW_ID"===n.id;return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(H.a,null),r.a.createElement(ue,{isDrawerOpen:c,toggleDrawer:this.toggleDrawer,riders:a,addRider:this.addRider,removeRider:this.removeRider}),r.a.createElement(ve,{isDrawerOpen:c,toggleDrawer:this.toggleDrawer},r.a.createElement(We,{rides:m,riders:a,selectRide:this.selectRide,toggleSaveDialog:this.toggleSaveDialog,toggleDeleteConfirm:this.toggleDeleteConfirm})),r.a.createElement(Q,{isDrawerOpen:c},r.a.createElement(Te,{viewport:o,setViewport:this.setViewport,path:i,setPath:this.setPath,layers:p}),n.id&&r.a.createElement(ye,{ride:n}),g&&r.a.createElement(Ae,{undoPath:this.undoPath,toggleSaveDialog:this.toggleSaveDialog,toggleDeleteConfirm:this.toggleDeleteConfirm})),r.a.createElement(at,{open:s,toggle:this.toggleSaveDialog,ride:n,saveRide:this.saveRide}),r.a.createElement(nt,{open:d,toggle:this.toggleDeleteConfirm,deleteFn:u}))}}]),t}(r.a.Component);o.a.render(r.a.createElement(rt,null),document.getElementById("root"))},95:function(e,t,a){e.exports=a.p+"static/media/nathan.ee2493ef.png"},96:function(e,t,a){e.exports=a.p+"static/media/sarah.24ca4f60.jpeg"},97:function(e,t,a){e.exports=a.p+"static/media/jesse.a82637d5.jpeg"}},[[319,1,2]]]);
//# sourceMappingURL=main.5b736bed.chunk.js.map